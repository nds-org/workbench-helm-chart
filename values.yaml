# Default values for workbench.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# V2
frontend:
  subdomain_prefix: "www"
  support_email: ""
  analytics_tracking_id: ""
  signin_url: "https://www.workbench.ndslabs.org/oauth2/start?rd=https%3A%2F%2Fwww.workbench.ndslabs.org%2Fmy-apps"
  customization:
    product_name: "Workbench"
    landing_html: "<span style='font-size:20pt;'><p>Labs Workbench is an environment where developers can prototype tools and capabilities</p><p>that help build out the NDS framework and services. In particular, it is a place that can</p><p>host the development activities of <a style='text-decoration:none;' href='http://www.nationaldataservice.org/projects/pilots.html'>NDS pilot projects</a></p></span>"
    favicon_path: "/favicon.svg"
    brand_logo_path: "/favicon.svg"
    learn_more_url: "http://www.nationaldataservice.org/platform/workbench.html"
    help_links:
      - icon: "fa-info-circle"
        name: "Feature Overview"
        url: "https://nationaldataservice.atlassian.net/wiki/display/NDSC/Feature+Overview"
      - icon: "fa-question-circle"
        name: "FAQ"
        url: "https://nationaldataservice.atlassian.net/wiki/display/NDSC/Frequently+Asked+Questions"
      - icon: "fa-book"
        name: "User's Guide"
        url: "https://nationaldataservice.atlassian.net/wiki/display/NDSC/User%27s+Guide"
      - icon: "fa-code-fork"
        name: "Developer's Guide"
        url: "https://nationaldataservice.atlassian.net/wiki/display/NDSC/Developer%27s+Guide"
      - icon: "fa-gavel"
        name: "Acceptable Use Policy"
        url: "https://nationaldataservice.atlassian.net/wiki/display/NDSC/Acceptable+Use+Policy"

backend:
  domain: "local.ndslabs.org"
  labels:
    app: workbench
  timeout: 30
  inactivity_timeout: 480
  specs:
    repo: "https://github.com/nds-org/ndslabs-specs.git"
    branch: master
  storage:
    db:
      persistent:
        # Values can be "false" for no persistent storage, "aws" for awsElasticBlockStore,
        # or "gce" for gcePersistentDisk
        type: false
        # If using awsElasticBlockStore enter the EBS volume id, if using gcePersistentDisk
        # enter the persistent disk name
        volume_id:
      storage_class: "hostpath"
      # access_mode: "ReadWriteOnce"   # default: ReadWriteOnce
      size: "1Gi"
    home:
      storage_class: "nfs-condo"
      claim_suffix: "-home"
    shared:
      enabled: false
      volume_path: "/tmp/shared"
      storage_class: "nfs-condo"
      read_only: true


keycloak:
  enabled: true

mongodb:
  enabled: true


controller:
  # kind: Deployment   # default: Deployment
  images:
    db: "mongo:3.6"
    webui: "ndslabs/webui:react"
    apiserver: "ndslabs/apiserver:python"
  # strategy_type: "Recreate"  # default: RollingUpdate

ingress:
  class: ""
  tls:
    - hosts:
      - "*.local.ndslabs.org"
      - "www.local.ndslabs.org"
      secretName: "ndslabs-tls"
  root:
    annotations:
      kubernetes.io/ingress.class: ""
      ingress.kubernetes.io/force-ssl-redirect: "true"
      ingress.kubernetes.io/ssl-redirect: "true"
      ingress.kubernetes.io/preserve-host: "true"
      ingress.kubernetes.io/redirect-permanent: "true"
      ingress.kubernetes.io/redirect-regex: "^https://(.*)"
      ingress.kubernetes.io/redirect-replacement: "https://www.$1"
      # ingress.kubernetes.io/permanent-redirect: "https://www.workbench.ndslabs.org/landing/"


  open:
    annotations:
      cert-manager.io/cluster-issuer: "acmedns-staging"
      kubernetes.io/ingress.class: ""
      nginx.ingress.kubernetes.io/app-root: "/"
      nginx.ingress.kubernetes.io/ssl-redirect: "true"
      nginx.ingress.kubernetes.io/force-ssl-redirect: "true"
  auth:
    annotations:
      kubernetes.io/ingress.class: ""
      kubernetes.io/ssl-redirect: "true"
      kubernetes.io/force-ssl-redirect: "true"
      ingress.kubernetes.io/auth-url: "https://$host/cauth/auth"
      ingress.kubernetes.io/auth-signin: "https://$host/login/"
      ingress.kubernetes.io/auth-response-headers: "x-auth-request-user, x-auth-request-email"

      
  
  userapps:
    annotations:
      # kubernetes.io/ingress.class: "traefik"
      signin_url: "https://www.workbench.ndslabs.org/oauth2/start?rd=https%3A%2F%2Fwww.workbench.ndslabs.org%2Fmy-apps"
      auth_url: "https://www.workbench.ndslabs.org/oauth2/auth"
      auth_response_headers: "x-auth-request-user, x-auth-request-email, x-auth-request-access-token, x-auth-request-redirect, x-auth-request-preferred-username"
  

### TODO

resources: {}
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  # limits:
  #  cpu: 100m
  #  memory: 128Mi
  # requests:
  #  cpu: 100m
  #  memory: 128Mi

nodeSelector: {}

tolerations: []

affinity: {}


